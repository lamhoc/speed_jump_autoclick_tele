local Players = game:GetService("Players")
local RunService = game:GetService("RunService")
local UserInputService = game:GetService("UserInputService")
local VirtualInputManager = game:GetService("VirtualInputManager")
local LocalPlayer = Players.LocalPlayer

local savedPositions = {}
local autoClickEnabled = false
local antiAfkEnabled = false
local loopTeleportEnabled = false
local autoAcceptTradeEnabled = falseÂ 
local loopTeleportDelay = 3

-- GUI
local screenGui = Instance.new("ScreenGui", LocalPlayer:WaitForChild("PlayerGui"))
screenGui.Name = "ModernModMenu"
screenGui.ResetOnSpawn = false

-- Toggle button
local toggleButton = Instance.new("ImageButton", screenGui)
toggleButton.Size = UDim2.new(0, 40, 0, 40)
toggleButton.Position = UDim2.new(1, -50, 1, -50)
toggleButton.BackgroundTransparency = 1
toggleButton.Image = "rbxassetid://6031091002"

-- Main Frame
local frame = Instance.new("Frame", screenGui)
frame.Size = UDim2.new(0, 320, 0, 500)
frame.Position = UDim2.new(0, 20, 0, 20)
frame.BackgroundColor3 = Color3.fromRGB(35, 40, 55)
frame.BorderSizePixel = 0
frame.Visible = false
frame.Active = true
frame.Draggable = true
frame.BackgroundTransparency = 0.05
Instance.new("UICorner", frame).CornerRadius = UDim.new(0, 12)

-- Title
local title = Instance.new("TextLabel", frame)
title.Size = UDim2.new(1, 0, 0, 40)
title.BackgroundTransparency = 1
title.Text = "lh_tapmod"
title.Font = Enum.Font.GothamBold
title.TextColor3 = Color3.new(1, 1, 1)
title.TextSize = 20
title.LayoutOrder = 0

-- Layout
local layout = Instance.new("UIListLayout", frame)
layout.SortOrder = Enum.SortOrder.LayoutOrder
layout.Padding = UDim.new(0, 8)
layout.VerticalAlignment = Enum.VerticalAlignment.Top
layout.HorizontalAlignment = Enum.HorizontalAlignment.Center

-- FPS Counter
local fpsLabel = Instance.new("TextLabel", screenGui)
fpsLabel.Size = UDim2.new(0, 100, 0, 25)
fpsLabel.Position = UDim2.new(0, 10, 0, 10)
fpsLabel.BackgroundTransparency = 0.4
fpsLabel.BackgroundColor3 = Color3.fromRGB(0, 0, 0)
fpsLabel.TextColor3 = Color3.new(1, 1, 1)
fpsLabel.Font = Enum.Font.Code
fpsLabel.TextSize = 16
fpsLabel.Text = "FPS: 0"
Instance.new("UICorner", fpsLabel).CornerRadius = UDim.new(0, 6)

-- FPS Update
local lastUpdate = tick()
local frameCount = 0
RunService.RenderStepped:Connect(function()
	frameCount += 1
	if tick() - lastUpdate >= 1 then
		fpsLabel.Text = "FPS: " .. tostring(frameCount)
		frameCount = 0
		lastUpdate = tick()
	end
end)

-- Create Functions
local function createTextBox(labelText, defaultValue, callback)
	local container = Instance.new("Frame")
	container.Size = UDim2.new(0.9, 0, 0, 36)
	container.BackgroundTransparency = 1
	container.LayoutOrder = layout.AbsoluteContentSize.Y
	container.Name = "Row"

	local label = Instance.new("TextLabel", container)
	label.Size = UDim2.new(0.4, 0, 1, 0)
	label.Text = labelText
	label.BackgroundTransparency = 1
	label.Font = Enum.Font.Gotham
	label.TextColor3 = Color3.fromRGB(220, 220, 220)
	label.TextSize = 16
	label.TextXAlignment = Enum.TextXAlignment.Left

	local textBox = Instance.new("TextBox", container)
	textBox.Size = UDim2.new(0.6, -8, 1, 0)
	textBox.Position = UDim2.new(0.4, 8, 0, 0)
	textBox.Text = tostring(defaultValue)
	textBox.Font = Enum.Font.GothamSemibold
	textBox.TextSize = 16
	textBox.BackgroundColor3 = Color3.fromRGB(50, 60, 80)
	textBox.TextColor3 = Color3.fromRGB(255, 255, 255)
	Instance.new("UICorner", textBox).CornerRadius = UDim.new(0, 6)

	textBox.FocusLost:Connect(function(enter)
		if enter then callback(tonumber(textBox.Text)) end
	end)

	container.Parent = frame
end

local function createButton(text, callback)
	local btn = Instance.new("TextButton")
	btn.Size = UDim2.new(0.9, 0, 0, 36)
	btn.Text = text
	btn.BackgroundColor3 = Color3.fromRGB(70, 130, 180)
	btn.TextColor3 = Color3.fromRGB(255, 255, 255)
	btn.Font = Enum.Font.GothamBold
	btn.TextSize = 16
	Instance.new("UICorner", btn).CornerRadius = UDim.new(0, 6)
	btn.MouseEnter:Connect(function() btn.BackgroundColor3 = Color3.fromRGB(90, 150, 200) end)
	btn.MouseLeave:Connect(function() btn.BackgroundColor3 = Color3.fromRGB(70, 130, 180) end)
	btn.MouseButton1Click:Connect(callback)
	btn.Parent = frame
end

local function createCheckbox(text, callback)
	local btn = Instance.new("TextButton")
	btn.Size = UDim2.new(0.9, 0, 0, 36)
	btn.Text = "â˜ " .. text
	btn.BackgroundColor3 = Color3.fromRGB(90, 90, 90)
	btn.TextColor3 = Color3.fromRGB(255, 255, 255)
	btn.Font = Enum.Font.Gotham
	btn.TextSize = 16
	Instance.new("UICorner", btn).CornerRadius = UDim.new(0, 6)

	local enabled = false
	btn.MouseButton1Click:Connect(function()
		enabled = not enabled
		btn.Text = (enabled and "â˜‘ " or "â˜ ") .. text
		callback(enabled)
	end)

	btn.Parent = frame
end

-- TÃNH NÄ‚NG: Auto Accept Trade (Spam 1s/láº§n khi hiá»‡n báº£ng)
createCheckbox("ğŸ¤ Auto Accept Trade (Fish It)", function(enabled)
Â  Â  autoAcceptTradeEnabled = enabled
Â  Â Â 
Â  Â  if enabled then
Â  Â  Â  Â  spawn(function()
Â  Â  Â  Â  Â  Â  while autoAcceptTradeEnabled do
Â  Â  Â  Â  Â  Â  Â  Â  pcall(function()
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  local playerGui = LocalPlayer:FindFirstChild("PlayerGui")
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  -- Kiá»ƒm tra Ä‘Æ°á»ng dáº«n nÃºt Yes
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  local yesButton = playerGui and playerGui:FindFirstChild("Prompt")Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â and playerGui.Prompt:FindFirstChild("Blackout")Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â and playerGui.Prompt.Blackout:FindFirstChild("Options")Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â and playerGui.Prompt.Blackout.Options:FindFirstChild("Yes")

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  -- Chá»‰ click náº¿u nÃºt Ä‘ang hiá»ƒn thá»‹ trÃªn mÃ n hÃ¬nh
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  if yesButton and yesButton.Visible and yesButton.AbsoluteSize.X > 0 then
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  local x = yesButton.AbsolutePosition.X + (yesButton.AbsoluteSize.X / 2)
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  local y = yesButton.AbsolutePosition.Y + (yesButton.AbsoluteSize.Y / 2) + 58
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  -- Thá»±c hiá»‡n click
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  VirtualInputManager:SendMouseButtonEvent(x, y, 0, true, game, 1)
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  task.wait(0.05)
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  VirtualInputManager:SendMouseButtonEvent(x, y, 0, false, game, 1)
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  print("lh_tapmod: Äang spam click Trade (1s/láº§n)...")
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  end
Â  Â  Â  Â  Â  Â  Â  Â  end)
Â  Â  Â  Â  Â  Â  Â  Â  -- Äá»£i 1 giÃ¢y trÆ°á»›c khi kiá»ƒm tra vÃ  click tiáº¿p
Â  Â  Â  Â  Â  Â  Â  Â  task.wait(1)
Â  Â  Â  Â  Â  Â  end
Â  Â  Â  Â  end)
Â  Â  end
end)

-- Controls (Speed, Jump, etc.)
createTextBox("Speed", 16, function(val)
	local h = LocalPlayer.Character and LocalPlayer.Character:FindFirstChildOfClass("Humanoid")
	if h then h.WalkSpeed = val end
end)

createTextBox("Jump", 50, function(val)
	local h = LocalPlayer.Character and LocalPlayer.Character:FindFirstChildOfClass("Humanoid")
	if h then h.JumpPower = val end
end)

createButton("ğŸ“Œ LÆ°u vá»‹ trÃ­", function()
	local hrp = LocalPlayer.Character and LocalPlayer.Character:FindFirstChild("HumanoidRootPart")
	if hrp then
		table.insert(savedPositions, hrp.Position)
	end
end)

createCheckbox("âš¡ Auto Click", function(enabled)
	autoClickEnabled = enabled
	if enabled then
		spawn(function()
			while autoClickEnabled do
				VirtualInputManager:SendMouseButtonEvent(0.5, 0.5, 0, true, nil, 0)
				VirtualInputManager:SendMouseButtonEvent(0.5, 0.5, 0, false, nil, 0)
				task.wait(0.1)
			end
		end)
	end
end)

createCheckbox("ğŸŠ Anti-AFK", function(enabled)
	antiAfkEnabled = enabled
	if enabled then
		spawn(function()
			while antiAfkEnabled do
				VirtualInputManager:SendMouseMoveEvent(math.random(), math.random(), 0)
				task.wait(60)
			end
		end)
	end
end)

-- Toggle Frame
toggleButton.MouseButton1Click:Connect(function()
	frame.Visible = not frame.Visible
end)
